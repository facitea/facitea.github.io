<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WriteDown</title>
    <link rel="stylesheet" href="title.css">
</head>
<body>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script src="firebase.js"></script>
    <script src="auth.js"></script>
    <script>
        /*
        db.collection("게시판").add({
            title: "Ada",
            content: "Lovelace",
            date: 1815
        })
        .then((docRef) => {
            console.log("Document written with ID: ", docRef.id);
        })
        .catch((error) => {
            console.error("Error adding document: ", error);
        });
        */
 
            

        

        function submit(){
            var today = new Date();

            var year = today.getFullYear();
            var month = ('0' + (today.getMonth() + 1)).slice(-2);
            var day = ('0' + today.getDate()).slice(-2);

            var dateString = year + '-' + month  + '-' + day;

            var hours = ('0' + today.getHours()).slice(-2); 
            var minutes = ('0' + today.getMinutes()).slice(-2);
            var seconds = ('0' + today.getSeconds()).slice(-2); 

            var timeString = hours + ':' + minutes  + ':' + seconds;
            var dateAndTime = dateString + " " + timeString; //날짜 만드는 함수 새로 만들어야겠네 후..


            let title = document.getElementById('title').value;
            let content = document.getElementById('content').value;

            db.collection("게시판").add({
                title: title,
                content: content,
                timeStamp: dateAndTime
            })
            .then((docRef) => {
                console.log("Document written with ID: ", docRef.id);
            })
            .catch((error) => {
                console.error("Error adding document: ", error);
            });
        } // timestamp는 고정하고, 만약 그것이 수정된다면 새로운 timestamp 테이블에 담아야겠다.

        



        //웹개발시 일반적으로 이미지는 database에 업로드하지 않습니다. 일반 하드인 Storage라는 곳에 올리셔야합니다. 그리고 Storage에 저장된 url을 가져와서 database에 저장합니다.
        
        //https://firebase.google.com/docs/firestore/quickstart#web-version-8 주소 나온대로 치면 다 된다.
        //https://codingapple.com/unit/firebase-installation-with-npm/ 참고할것
    </script>

    <div class="wrapper">
        <header>
            <nav>
                <div class="navLeftSide">
                    <h1><a href="/index.html">Animall</a></h1>
                </div>
                <div class="navRightSide">
                    <ul>
                        <li class="navFlexItem"><a href="./index.html">Board</a></li>
                        <li class="navFlexItem"><a href="./index.html">Training</a></li>
                        <li class="navFlexItem"><a href="./index.html">Shop</a></li>
                        <li class="navFlexItem"><a href="./index.html">Trip</a></li>
                        <li class="navFlexItem"><a href="./myPage.html">Me</a></li>
                    </ul>
                </div>
            </nav>
        </header>
    
        <div class="writingForm"> 
            <input type="text" id="title">
            <p>
            <textarea id="content"></textarea>
            <p>
            <input type="file" id="uploadImage"> 
            <p>
            <input type="button" value="클릭" onclick="submit();">
        </div>
    </div>
    
</body>
</html>